{"version":3,"sources":["../src/authCapture.js"],"names":["require","config","paths","loadCss","url","link","document","createElement","type","rel","href","getElementsByTagName","appendChild","define","$","init","streams","validDataface","validDataid","s2","s3","append","prepend","text","click","modal","startup","getTracks","forEach","track","stop","ajax","method","data","imgdataface","imgdataid","success","alert","window","location","reload","html","css","imgdata","prop","height","streaming","video","canvas","photo","startbutton","videopan","canvaspan","photopan","startpan","getElementById","navigator","mediaDevices","getUserMedia","audio","then","stream","srcObject","play","catch","err","console","log","addEventListener","videoHeight","videoWidth","isNaN","setAttribute","ev","takepicture","preventDefault","takepicturepan","clearphoto","clearphotopan","context","getContext","fillStyle","fillRect","width","toDataURL","drawImage"],"mappings":"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","sourcesContent":["\nrequire.config( {\n  paths: {\n      'datatables.net': '//cdn.datatables.net/1.10.21/js/jquery.dataTables.min',\n    \n      \n  }\n} );\nfunction loadCss(url) {\n  var link = document.createElement(\"link\");\n  link.type = \"text/css\";\n  link.rel = \"stylesheet\";\n  link.href = url;\n  document.getElementsByTagName(\"head\")[0].appendChild(link);\n}\ndefine(['jquery'], function($) {\n  return {\n      /**\n       * Init function.\n       *\n       */ \n\n      init: function(url) \n          {\n              var streams;\n              var validDataface;\n              var validDataid;\n              var s2=false;\n              var s3=false;\n              \n\n              loadCss(\"accessrule/mproctoring/cam.css\");\n                  $(\"body\").append('<div class=\"modal fade\" id=\"myModal\" role=\"dialog\"><div class=\"modal-dialog modal-lg\"> <div class=\"modal-content\"><div class=\"modal-header\"> '+\n                  ' <h2><b><center>Validate Yourself</center></b></h2>          </div>              <div class=\"modal-body\">  '+\n                  '<center> <h3> Face Capture</h3></center><h4 style=\"color:red;\"><b>Instructions: </b></h4><br><h6 style=\"color:red;\">1. There is no backgorund image When capturing face. </h6><h6 style=\"color:red;\">2. More than one person for capture face authentication fails.   </h6> <br><div class=\"row\">    <div class=\"col-6\">      '\n                  +' <div class=\"camera\"><center>  <label><h3> Step 1 </h3></label> </center><video id=\"video\">Video stream not available.</video> <button id=\"startbutton\">Take photo</button> </div></div><div class=\"col-6\">'\n                 +'<canvas id=\"canvas\"></canvas><div class=\"output\"><center> <label><h3> Step 2 </h3></label></center><img id=\"photo\" alt=\"The screen capture will appear in this box.\">  <button id=\"validCap\">validate</button>   </div>   </div> </div>  '\n                 +'  <center><h3>Identity Card Capture</h3></center><h4 style=\"color:red;\"><b>Instructions: </b></h4><br><h6 style=\"color:red;\">Please bring ID card on front on camera</h6> <br><div class=\"row\">    <div class=\"col-6\">      '\n                 +'   <div class=\"camera\"><center> <label><h3> Step 3 </h3></label></center>  <video id=\"videopan\">Video stream not available.</video> <button id=\"startpan\">Take photo</button> </div></div>'\n                 +'<div class=\"col-6\"><canvas id=\"canvaspan\"></canvas><div class=\"output\"> <center> <label><h3> Step 4 </h3></label></center><img id=\"photopan\" alt=\"The screen capture will appear in this box.\">  '\n                 +'</div>   </div>         </div>              <div class=\"modal-footer\">      '\n                 +'<span style=\"color:red;\"> Confirm button will not be enabled till all the 4 steps are done.  </span>  <button type=\"button\" class=\"btn btn-success\" id=\"camConfirm\">Confirm</button>     '\n                 +'  <button type=\"button\" class=\"btn btn-default\" id=\"camClose\" data-dismiss=\"modal\">Close</button></div></div></div></div>');\n                 $('</br>')\n                  $('.quizattempt').prepend(\n                    \n                  $('<button/>', {\n                      'id':\"btnCap\" ,\n                      'class' : \"btn btn-secondary\" \n                  }),$('</br>'),$('</br>'));\n\n                \n                  //$('#btnCap').append('<br/>');\n                  $('#btnCap').text(\" Step 1 : Authenticate Yourself\")\n                  $('#btnCap').click(function(){\n                  $(\"#myModal\").modal(\"show\")\n                  startup();\n                  })\n\n                  $('#camClose').click(function(){\n                      streams.getTracks().forEach(function(track) {\n                          track.stop();\n                        });\n                      })\n                  \n\n\n\n                      \n                      $('#camConfirm').click(function(){\n                        \n                        $.ajax({\n                            method: \"POST\",\n                            url: url+'/mod/quiz/accessrule/mproctoring/api/capture_id_face.php',\n                            data: {imgdataface: validDataface ,imgdataid:validDataid},\n                            success:function(data){\n                              if(data==\"done\")\n                              {\n                                alert(\"Authentication successful. Click on Attempt quiz to proceed\");\n                                window.location.reload();\n                              }\n                              else{\n                                alert(\"Error in Authentication\");\n                              }\n                            }\n                          });\n                          \n                                                })\n\n                     \n\n                    \n                      \n        $('#validCap').click(function(){\n          \n                         $(\"#validCap\").html(\"please wait...\")\n          $(\"#validCap\").css(\"background-color\",\"red\");\n  $.ajax({\n      method: \"POST\",\n      url: url+'/mod/quiz/accessrule/mproctoring/api/face_count.php',\n      data: {imgdata: validDataface },\n      success:function(data){\n        if(data=='1')\n        {\n          s2=true;\n          alert(\"Face Validation Successful\")\n          $(\"#validCap\").html(\"&#10004;validated\")\n          $(\"#validCap\").css(\"background-color\",\"green\");\n\n          if (s2 && s3)\n          {\n            $('#camConfirm').prop(\"disabled\", false); \n          }\n         \n        }\n        else\n        {\n          alert(\"Face could not be detected.<br>Multiple faces detected. Only one person is allowed. Kindly re-take.\");\n          $(\"#validCap\").html(\"validate\")\n          $(\"#validCap\").css(\"background-color\",\"orange\");\n        }\n      }\n    });\n    \n                          })\n\n                  var width = 320;    // We will scale the photo width to this\n                  var height = 0;     // This will be computed based on the input stream\n                \n                  // |streaming| indicates whether or not we're currently streaming\n                  // video from the camera. Obviously, we start at false.\n                \n                  var streaming = false;\n                \n                  // The various HTML elements we need to configure or control. These\n                  // will be set by the startup() function.\n                \n                  var video = null;\n                  var canvas = null;\n                  var photo = null;\n                  var startbutton = null;\n                  var videopan = null;\n                  var canvaspan = null;\n                  var photopan = null;\n                  var startpan = null;\n                \n                  function startup() {\n                    video = document.getElementById('video');\n                    canvas = document.getElementById('canvas');\n                    photo = document.getElementById('photo');\n                    startbutton = document.getElementById('startbutton');\n\n                    videopan = document.getElementById('videopan');\n                    canvaspan = document.getElementById('canvaspan');\n                    photopan = document.getElementById('photopan');\n                    startpan = document.getElementById('startpan');\n                    navigator.mediaDevices.getUserMedia({video: true, audio: false})\n                    .then(function(stream) {\n                      streams=stream;\n                      video.srcObject = stream;\n                      video.play();\n                      videopan.srcObject = stream;\n                      videopan.play();\n                    })\n                    .catch(function(err) {\n                      console.log(\"An error occurred: \" + err);\n                    });\n                \n                    video.addEventListener('canplay', function(ev){\n                      if (!streaming) {\n                        height = video.videoHeight / (video.videoWidth/width);\n                      \n                        // Firefox currently has a bug where the height can't be read from\n                        // the video, so we will make assumptions if this happens.\n                      \n                        if (isNaN(height)) {\n                          height = width / (4/3);\n                        }\n                      \n                        video.setAttribute('width', width);\n                        video.setAttribute('height', height);\n                        canvas.setAttribute('width', width);\n                        canvas.setAttribute('height', height);\n                        streaming = true;\n                      }\n                    }, false);\n\n                    videopan.addEventListener('canplay', function(ev){\n                      if (!streaming) {\n                        height = videopan.videoHeight / (videopan.videoWidth/width);\n                      \n                        // Firefox currently has a bug where the height can't be read from\n                        // the video, so we will make assumptions if this happens.\n                      \n                        if (isNaN(height)) {\n                          height = width / (4/3);\n                        }\n                      \n                        videopan.setAttribute('width', width);\n                        videopan.setAttribute('height', height);\n                        canvaspan.setAttribute('width', width);\n                        canvaspan.setAttribute('height', height);\n                        streaming = true;\n                      }\n                    }, false);\n                \n                    $(\"#camConfirm\").prop(\"disabled\",true); \n                    $(\"#validCap\").prop(\"disabled\",true);\n\n                    startbutton.addEventListener('click', function(ev){\n                      $(\"#validCap\").prop(\"disabled\",false);\n                      $(\"#startbutton\").text(\"Retake Photo\");   \n                        \n                      takepicture();\n                      ev.preventDefault();\n                    }, false);\n\n\n                    startpan.addEventListener('click', function(ev){\n                      \n                      s3=true;\n                      takepicturepan();\n                      if (s2 && s3)\n                      {\n                        $('#camConfirm').prop(\"disabled\", false); \n                      }\n                      ev.preventDefault();\n                    }, false);\n                    \n                    clearphoto();\n                    clearphotopan();\n                  }\n                \n                  // Fill the photo with an indication that none has been\n                  // captured.\n                \n                  function clearphoto() {\n                      var context = canvas.getContext('2d');\n                      context.fillStyle = \"#AAA\";\n                      context.fillRect(0, 0, canvas.width, canvas.height);\n                  \n                      var data = canvas.toDataURL('image/png');\n                      photo.setAttribute('src', data);\n\n\n                     \n                  }\n                  \n\n                  function clearphotopan() {\n             \n\n                      var context = canvaspan.getContext('2d');\n                      context.fillStyle = \"#AAA\";\n                      context.fillRect(0, 0, canvaspan.width, canvaspan.height);\n                  \n                      var data = canvaspan.toDataURL('image/png');\n                      photopan.setAttribute('src', data);\n                  }\n                  \n                  function takepicture() {\n                    var context = canvas.getContext('2d');\n                    if (width && height) {\n                      canvas.width = width;\n                      canvas.height = height;\n                      context.drawImage(video, 0, 0, width, height);\n                      validDataface=canvas.toDataURL('image/png');\n                      var data = canvas.toDataURL('image/png');\n                      photo.setAttribute('src', data);\n                    } else {\n                      clearphoto();\n                    }\n                  }\n                \n\n                    \n                  function takepicturepan() {\n                      var context = canvaspan.getContext('2d');\n                      if (width && height) {\n                        canvaspan.width = width;\n                        canvaspan.height = height;\n                        context.drawImage(videopan, 0, 0, width, height);\n                      \n                        var data = canvaspan.toDataURL('image/png');\n                        validDataid= canvaspan.toDataURL('image/png');\n                        photopan.setAttribute('src', data);\n                      } else {\n                        clearphotopan();\n                      }\n                    }\n                  // Set up our event listener to run the startup process\n                  // once loading is complete.\n                \n\n\n\n          }\n      };\n  });"],"file":"authCapture.min.js"}